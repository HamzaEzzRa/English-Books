{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\amine\\\\Desktop\\\\Projet JEE\\\\Frontend\\\\titsuite\\\\src\\\\components\\\\Profile.js\";\nimport HorizontalNav from \"./HorizontalNav\";\nimport { React, Component } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Profile extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      email: '',\n      firstName: '',\n      lastName: '',\n      phoneNumber: '',\n      birthDate: '',\n      city: '',\n      address: '',\n      activity: '',\n      minimumWage: '',\n      diplomas: []\n    };\n\n    this.handleProfileUpdate = event => {\n      event.preventDefault();\n      const user = {\n        firstName: this.state.firstName,\n        lastName: this.state.lastName,\n        phoneNumber: this.state.phoneNumber,\n        birthDate: this.state.birthDate,\n        city: this.state.city,\n        address: this.state.address,\n        activity: this.state.activity,\n        minimumWage: this.state.minimumWage\n      };\n      console.log(user);\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(user)\n      };\n      fetch('/Titsuite-1.0-SNAPSHOT/api/users/profile/update', requestOptions).then(res => res.json()).then(data => {\n        console.log(data);\n      });\n    };\n\n    this.handleDiplomaUpdate = (event, index) => {\n      event.preventDefault();\n      const diplomas = [...this.state.diplomas];\n      let diploma = null;\n\n      for (let i = 0; i < diplomas.length; i++) {\n        if (diplomas[i].id === index) {\n          diploma = diplomas[i];\n          break;\n        }\n      }\n\n      console.log(diploma);\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(diploma)\n      };\n      fetch('/Titsuite-1.0-SNAPSHOT/api/diplomas/update', requestOptions).then(res => res.json()).then(data => {\n        console.log(data);\n      });\n    };\n\n    this.handleProfileChange = event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n    };\n\n    this.handleDiplomaName = (event, index) => {\n      let moddedDiplomas = [...this.state.diplomas];\n\n      for (let i = 0; i < moddedDiplomas.length; i++) {\n        if (moddedDiplomas[i].id === index) {\n          moddedDiplomas[i].name = event.target.value;\n          break;\n        }\n      }\n\n      this.setState({\n        diplomas: moddedDiplomas\n      });\n    };\n\n    this.handleDiplomaDate = (event, index) => {\n      let moddedDiplomas = [...this.state.diplomas];\n\n      for (let i = 0; i < moddedDiplomas.length; i++) {\n        if (moddedDiplomas[i].id === index) {\n          moddedDiplomas[i].acquisitionDate = event.target.value;\n          break;\n        }\n      }\n\n      this.setState({\n        diplomas: moddedDiplomas\n      });\n    };\n\n    this.handleDiplomaField = (event, index) => {\n      let moddedDiplomas = [...this.state.diplomas];\n\n      for (let i = 0; i < moddedDiplomas.length; i++) {\n        if (moddedDiplomas[i].id === index) {\n          moddedDiplomas[i].field = event.target.value;\n          break;\n        }\n      }\n\n      this.setState({\n        diplomas: moddedDiplomas\n      });\n    };\n\n    this.handleLogout = event => {\n      event.preventDefault();\n      const requestOptions = {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      };\n      fetch('/Titsuite-1.0-SNAPSHOT/api/users/logout', requestOptions).then(res => res.json()).then(data => {\n        console.log(data);\n        this.props.rest.logout();\n        this.props.history.push('/login');\n      });\n    };\n\n    this.formatDate = date => {\n      let d = new Date(date),\n          month = '' + (d.getMonth() + 1),\n          day = '' + d.getDate(),\n          year = d.getFullYear();\n      if (month.length < 2) month = '0' + month;\n      if (day.length < 2) day = '0' + day;\n      return [year, month, day].join('-');\n    };\n  }\n\n  componentDidMount() {\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    };\n    fetch('/Titsuite-1.0-SNAPSHOT/api/users/profile', requestOptions).then(res => res.json()).then(data => {\n      console.log(data);\n\n      if (data != null) {\n        this.setState({\n          email: data.email,\n          firstName: data.firstName,\n          lastName: data.lastName,\n          phoneNumber: data.phoneNumber,\n          birthDate: this.formatDate(data.birthDate),\n          city: data.city,\n          address: data.address,\n          activity: data.activity,\n          minimumWage: data.minimumWage,\n          diplomas: JSON.parse(data.diplomas)\n        });\n      }\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"col-2\",\n        children: /*#__PURE__*/_jsxDEV(HorizontalNav, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 183,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"col Content\",\n        children: /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: e => {\n            this.handleDiplomaUpdate(e, diploma.id);\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-8\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card mb-3\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"card-body\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    className: \"customButton padded-left\",\n                    children: \"Save\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 192,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                    className: \"padded-up\",\n                    children: \"Diploma\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 193,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-sm-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    name: \"name\",\n                    value: diploma.name,\n                    onChange: e => {\n                      this.handleDiplomaName(e, diploma.id);\n                    },\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 197,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 191,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-sm-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Acquisition Date\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 202,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    name: \"date\",\n                    type: \"date\",\n                    value: this.formatDate(diploma.acquisitionDate),\n                    onChange: e => {\n                      this.handleDiplomaDate(e, diploma.id);\n                    },\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"row\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"col-sm-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"label\", {\n                      children: \"Field\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 209,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    name: \"field\",\n                    value: diploma.field,\n                    onChange: e => {\n                      this.handleDiplomaField(e, diploma.id);\n                    },\n                    required: true\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 190,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 189,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 25\n          }, this)\n        }, diploma.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 16\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["C:/Users/amine/Desktop/Projet JEE/Frontend/titsuite/src/components/Profile.js"],"names":["HorizontalNav","React","Component","Profile","state","email","firstName","lastName","phoneNumber","birthDate","city","address","activity","minimumWage","diplomas","handleProfileUpdate","event","preventDefault","user","console","log","requestOptions","method","headers","body","JSON","stringify","fetch","then","res","json","data","handleDiplomaUpdate","index","diploma","i","length","id","handleProfileChange","setState","target","name","value","handleDiplomaName","moddedDiplomas","handleDiplomaDate","acquisitionDate","handleDiplomaField","field","handleLogout","props","rest","logout","history","push","formatDate","date","d","Date","month","getMonth","day","getDate","year","getFullYear","join","componentDidMount","parse","render","e"],"mappings":"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","sourcesContent":["import HorizontalNav from \"./HorizontalNav\";\r\nimport {React, Component} from 'react'\r\n\r\nexport default class Profile extends Component{\r\n    state = {\r\n        email: '',\r\n        firstName: '',\r\n        lastName: '',\r\n        phoneNumber: '',\r\n        birthDate: '',\r\n        city: '',\r\n        address: '',\r\n        activity: '',\r\n        minimumWage: '',\r\n        diplomas: [],\r\n    }\r\n\r\n    handleProfileUpdate = (event) => {\r\n        event.preventDefault();\r\n\r\n        const user = {\r\n            firstName: this.state.firstName,\r\n            lastName: this.state.lastName,\r\n            phoneNumber: this.state.phoneNumber,\r\n            birthDate: this.state.birthDate,\r\n            city: this.state.city,\r\n            address: this.state.address,\r\n            activity: this.state.activity,\r\n            minimumWage: this.state.minimumWage\r\n        };\r\n\r\n        console.log(user);\r\n\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(user)\r\n        };\r\n        fetch('/Titsuite-1.0-SNAPSHOT/api/users/profile/update', requestOptions)\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n                console.log(data);\r\n            }\r\n        );\r\n    }\r\n\r\n    handleDiplomaUpdate = (event, index) => {\r\n        event.preventDefault();\r\n\r\n        const diplomas = [...this.state.diplomas];\r\n        let diploma = null;\r\n        for (let i = 0; i < diplomas.length; i++) {\r\n            if (diplomas[i].id === index) {\r\n                diploma = diplomas[i];\r\n                break;\r\n            }\r\n        }\r\n\r\n        console.log(diploma);\r\n\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify(diploma)\r\n        };\r\n        fetch('/Titsuite-1.0-SNAPSHOT/api/diplomas/update', requestOptions)\r\n            .then(res => res.json())\r\n            .then((data) => {\r\n                console.log(data);\r\n            }\r\n        );\r\n    }\r\n\r\n    handleProfileChange = (event) => {\r\n        this.setState(\r\n            {\r\n                [event.target.name]: event.target.value\r\n            }\r\n        )\r\n    }\r\n\r\n    handleDiplomaName = (event, index) => {\r\n        let moddedDiplomas = [...this.state.diplomas];\r\n        for (let i = 0; i < moddedDiplomas.length; i++) {\r\n            if (moddedDiplomas[i].id === index) {\r\n                moddedDiplomas[i].name = event.target.value;\r\n                break;\r\n            }\r\n        }\r\n        this.setState(\r\n            {\r\n                diplomas: moddedDiplomas\r\n            }\r\n        );\r\n    }\r\n\r\n    handleDiplomaDate = (event, index) => {\r\n        let moddedDiplomas = [...this.state.diplomas];\r\n        for (let i = 0; i < moddedDiplomas.length; i++) {\r\n            if (moddedDiplomas[i].id === index) {\r\n                moddedDiplomas[i].acquisitionDate = event.target.value;\r\n                break;\r\n            }\r\n        }\r\n        this.setState(\r\n            {\r\n                diplomas: moddedDiplomas\r\n            }\r\n        );\r\n    }\r\n\r\n    handleDiplomaField = (event, index) => {\r\n        let moddedDiplomas = [...this.state.diplomas];\r\n        for (let i = 0; i < moddedDiplomas.length; i++) {\r\n            if (moddedDiplomas[i].id === index) {\r\n                moddedDiplomas[i].field = event.target.value;\r\n                break;\r\n            }\r\n        }\r\n        this.setState(\r\n            {\r\n                diplomas: moddedDiplomas\r\n            }\r\n        );\r\n    }\r\n\r\n    handleLogout = (event) => {\r\n        event.preventDefault();\r\n\r\n        const requestOptions = {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' }\r\n        };\r\n        fetch('/Titsuite-1.0-SNAPSHOT/api/users/logout', requestOptions).then(res => res.json()).then((data) => {\r\n            console.log(data);\r\n            this.props.rest.logout();\r\n            this.props.history.push('/login');\r\n        });\r\n    }\r\n\r\n    formatDate = (date) => {\r\n        let d = new Date(date),\r\n        month = '' + (d.getMonth() + 1),\r\n        day = '' + d.getDate(),\r\n        year = d.getFullYear();\r\n    \r\n        if (month.length < 2) \r\n            month = '0' + month;\r\n        if (day.length < 2) \r\n            day = '0' + day;\r\n    \r\n        return [year, month, day].join('-');\r\n    }\r\n\r\n    componentDidMount() {\r\n        const requestOptions = {\r\n            method: 'GET',\r\n            headers: { 'Content-Type': 'application/json' }\r\n        };\r\n        fetch('/Titsuite-1.0-SNAPSHOT/api/users/profile', requestOptions).then(res => res.json()).then((data) => {\r\n            console.log(data);\r\n            if (data != null) {\r\n                this.setState(\r\n                    {\r\n                        email: data.email,\r\n                        firstName: data.firstName,\r\n                        lastName: data.lastName,\r\n                        phoneNumber: data.phoneNumber,\r\n                        birthDate: this.formatDate(data.birthDate),\r\n                        city: data.city,\r\n                        address: data.address,\r\n                        activity: data.activity,\r\n                        minimumWage: data.minimumWage,\r\n                        diplomas: JSON.parse(data.diplomas)\r\n                    }\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    render(){\r\n        return <div>\r\n                <div class=\"col-2\">\r\n                    <HorizontalNav />\r\n                </div>\r\n                <div class=\"col Content\">\r\n                <form onSubmit={(e) => {this.handleDiplomaUpdate(e, diploma.id)}} key={diploma.id}>\r\n                        <div className=\"col-md-8\">\r\n                            <div className=\"card mb-3\">\r\n                                <div className=\"card-body\">\r\n                                    <div className=\"row\">\r\n                                        <button type=\"submit\" className=\"customButton padded-left\">Save</button>\r\n                                        <h3 className=\"padded-up\">Diploma</h3>\r\n                                        <div className=\"col-sm-3\">\r\n                                            <label>Name</label>\r\n                                        </div>\r\n                                        <input name=\"name\" value={diploma.name} onChange={(e) => {this.handleDiplomaName(e, diploma.id)}} required />\r\n                                    </div>\r\n                                    <hr />\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-sm-3\">\r\n                                            <label>Acquisition Date</label>\r\n                                        </div>\r\n                                        <input name=\"date\" type=\"date\" value={this.formatDate(diploma.acquisitionDate)} onChange={(e) => {this.handleDiplomaDate(e, diploma.id)}} required />\r\n                                    </div>\r\n                                    <hr />\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-sm-3\">\r\n                                            <label>Field</label>\r\n                                        </div>\r\n                                        <input name=\"field\" value={diploma.field} onChange={(e) => {this.handleDiplomaField(e, diploma.id)}} required />\r\n                                    </div>\r\n                                    <hr />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </form>\r\n                </div>\r\n        </div>\r\n    }\r\n}"]},"metadata":{},"sourceType":"module"}